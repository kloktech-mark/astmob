#summary Describe DNS functionality
#labels Phase-Deploy

AST can be used to generate dns configuration.  Works with [http://www.isc.org/software/bind Bind] style named configuration files.

== Creating Zones in AST ==

Zones need to be created before configuration can be generated.  For bind, domain configuration is usually in /etc/bind/named.conf.local.

Given a main domain named xyz.com and subdomains(cp1,da4) for each colo, here's named.conf.local:
{{{
zone "xyz.com"
{
    type master;
    file "/etc/bind/zone/xyz.com";
    allow-update { none; };
    allow-query { local; };
};

zone "cp1.xyz.com"
{
    type master;
    file "/etc/bind/zone/cp1.xyz.com";
    allow-update { none; };
    allow-query { local; };
};

zone "da4.xyz.com"
{
    type master;
    file "/etc/bind/zone/da4.xyz.com";
    allow-update { none; };
    allow-query { local; };
};
}}}



== Downloading DNS Configuration ==

  # Create zones matching your /etc/bind/named.conf.local
  # Asset will be places under closest matching zone.  For example:
    * Two zones, xyz.com and abc.xyz.com.
    * host1.abc.xyz.com will created under abc.xyz.com's zone file, *NOT* xyz.com.
    * Create a base zone like xyz.com can help catching some misspelled hostnames.
  # Run ast_dns script which reads /etc/bind/named.conf.local and ask AST server for records of each zone.
    * Script is written in Perl and requires BIND::Conf_Parser, debian has it in package, libbind-confparser-perl.
    * Run script with enough privileges to write where zone files are specified in named.conf.local.